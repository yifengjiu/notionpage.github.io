<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>内存结构 &nbsp;|&nbsp;沂风</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="内存结构 ">
  
    <meta name="description" content="JVM内存结果">
    <meta property="og:description" content="JVM内存结果">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🚜&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>关于</span>
        </div>
      </a>
    
  
    
  
</nav>
  <header class="Header">
    
      <div class="Header__Cover">
        <img src="https://www.notion.so/images/page-cover/met_william_morris_1877_willow.jpg">
      </div>
    
    <div class="Header__Spacer ">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🚜&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">内存结构 </h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Sat, Aug 12, 2023</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--brown">
            <a href="tag/JVM.html">JVM</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/4705369bb85b4d72a6a0f64fba71cbca" class="PageRoot"><ul id="https://www.notion.so/037002de484946deb3974eecd0c794c2" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/e9ac08612e75437483e856b05c284dde"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">JVM内存结构</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/b17f3dbd3c7f4772946d4d8a2ab5d546"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">运行时数据区</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/2c98b5b8867c4852929ba31723674b6e"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">方法区</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/7a6dc95cf2bd44eb9b4f4dbdfe12fc4d"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">运行时常量池</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/3b227cdcf4bc428da5f987724096a75f"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">永久代（PermGen）是 Hotspot 虚拟机特有的概念， Java8 的时候又被元空间</strong></span><span class="SemanticString">取代了，永久代和元空间都可以理解为方法区的落地实现。</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/6865aa06dc7044dc93aee919a7fe153d"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">永久代被拆分，元空间存储类信息，静态变量和常量池并入堆中</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/01f3d1ba58a948ca82d22ee742e8051b"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">方法区存储着类信息，常量池，静态变量等数据</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/86109755bbcb4bd6b4ea64ec80d79c41"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">方法区的垃圾回收</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/1114a577c8a44cd9a5e1576909ba86b3"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">Java虚拟机栈</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c9edac2c53654cb085c6b90e364729de"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">动态链接</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/63c3fd50da2a4521b9ef857e3a4b6610"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">本地方法栈</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/1386d50626cf41ed96a1c602cf8508ac"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">堆</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/9ba526b184d547c2aa10fd32e219b6b8"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">为了进行高效的垃圾回收，将堆分为三块区域</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/18ecf189e8b54fc084565554cf66caa4"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">年轻代 Minor GC</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/04d3fc9acfdf43b5a29ddcc4a9c81fac"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">老年代 Major GC</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/be38912f1c604edbab86a5f9cee3d088"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">程序计数器</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/790780274a9b49c1ba80b3bc9a79e7d5"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">存储下一条需要运行的指令</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/452f8e9e661d4a5ea2c779e308acb3ca"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">相关分析</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/fa2677f81c704c49b328355dd8687465"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">基本数据类型的数据本身是不会改变的，</span></span></div></a></li></ul><h1 id="https://www.notion.so/e9ac08612e75437483e856b05c284dde" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/e9ac08612e75437483e856b05c284dde"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">JVM内存结构</span></span></h1><div id="https://www.notion.so/c8368b32f6254787a750b1a9a0b3bd1a" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb0f0e563-f01a-408e-b7e4-e4f4c7a708d0%2FUntitled.png?width=613&amp;table=block&amp;id=c8368b32-f625-4787-a750-b1a9a0b3bd1a"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb0f0e563-f01a-408e-b7e4-e4f4c7a708d0%2FUntitled.png?width=613&amp;table=block&amp;id=c8368b32-f625-4787-a750-b1a9a0b3bd1a" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/7a466ddf579740478eb5b206df8bc45d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/7c1136b680604aebb2b54c545687868e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">堆：</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">存放对象实例</strong></span><span class="SemanticString">，几乎所有的对象实例都在这里分配内存</span></span></li><li id="https://www.notion.so/fd5b870f5f3a48e7a9c76b0e8ac432a7" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">虚拟机栈：虚拟机栈描述的是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Java方法执行的内存结构</strong></span><span class="SemanticString">：每个方法被执行的时候都会同时创建一个</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">栈帧</strong></span><span class="SemanticString">（Stack Frame）用于存储局部变量表、操作栈、动态链接、方法出口等信息</span></span></li><li id="https://www.notion.so/b19acfa44caf483cbcd3ca7e37a7e7c0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">本地方法栈：本地方法栈则是为虚拟机使用到的</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Native方法服务</strong></span><span class="SemanticString">。</span></span></li><li id="https://www.notion.so/59974fd561734be68e29d4eb21da3617" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">方法区：存储已</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">被虚拟机加载的类元数据信息</strong></span><span class="SemanticString">(元空间)</span></span></li><li id="https://www.notion.so/3ff506338d3242cba4e612eb5fbd11d8" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">程序计数器：当前线程所执行的字节码的</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">行号指示器</strong></span></span></li></ul><h1 id="https://www.notion.so/b17f3dbd3c7f4772946d4d8a2ab5d546" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/b17f3dbd3c7f4772946d4d8a2ab5d546"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">运行时数据区</span></span></h1><h2 id="https://www.notion.so/2c98b5b8867c4852929ba31723674b6e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/2c98b5b8867c4852929ba31723674b6e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">方法区</span></span></h2><blockquote id="https://www.notion.so/09ebdbe33be049b6aeb66921849b05d4" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">方法区（Method Area）与Java堆一样，是各个线程共享的内存区域，它用于存储已被虚拟机加载 的类型信息、常量、静态变量、即时编译器编译后的代码缓存等数据。虽然《Java虚拟机规范》中把 方法区描述为堆的一个逻辑部分，但是它却有一个别名叫作“非堆”（Non-Heap），目的是与Java堆区 分开来。—— 深入理解java虚拟机第三版 2.2.5 方法区</span></span></blockquote><ul class="BulletedListWrapper"><li id="https://www.notion.so/5a4d29bed85046f995931e9f6ff24602" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">该区域是所有虚拟机线程共享的区，存储了成员变量，方法数据</span></span></li><li id="https://www.notion.so/fa61622d9807450b855c76911b012106" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">方法区是在虚拟机启动时就会被创建，并且不同的</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">jvm厂商</strong></span><span class="SemanticString">实现的方式可能会不一样</span></span></li><li id="https://www.notion.so/325702a3e12047caa363d4cc5fbf2d71" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">同时也会造成堆内存溢出（1.8叫元空间内存溢出，之前叫永久代内存溢出，由于1.8使用了元空间，一般不会造成内存溢出）</span></span></li></ul><div id="https://www.notion.so/f3de7b215a6a422dbe38e89ef40624e6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">1类被加载进JVM中，元空间存储着类的信息</span></span></p></div><div id="https://www.notion.so/5f3940061b94410181b8ab9041685a37" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">2然后JVM找到主函数入口，为main函数创建栈帧，开啊实质性main函数</span></span></p></div><div id="https://www.notion.so/9a95b33abbe7490797c6006477ddced0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">3加载相关类，并把相关类型放入原空间</span></span></p></div><div id="https://www.notion.so/9cd5196eea7b4cfa9ddcf47c4ca597a3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">4在堆空间内为相关实例分配内存，然后调用构造函数初始化。这个实例持有者指向方法区中相关类型信息的引用</span></span></p></div><div id="https://www.notion.so/29f31e33fc8c490aab0ab68a1814b2dc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">5实践过程：JVM根据引用找到栈中的对象，然后根据对象持有的引用找到方法区中的类型信息，获得相关函数的字节码地址</span></span></p></div><div id="https://www.notion.so/9da1cc0a1bc64321910a1a73d8241d70" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">6为函数创建栈帧，开始运行函数</span></span></p></div><h3 id="https://www.notion.so/7a6dc95cf2bd44eb9b4f4dbdfe12fc4d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/7a6dc95cf2bd44eb9b4f4dbdfe12fc4d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">运行时常量池</span></span></h3><div id="https://www.notion.so/963384b26ffc4a17875de7d2d4821849" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">一个有效的字节码文件中除了包含类的版本信息、字段、方法以及接口等描述信息外，还包含一项信息那就是常量池表（Constant Pool Table），包含各种字面量和对类型、域和方法的符号引用。</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"></strong></span></span></p></div><div id="https://www.notion.so/21d268458bfe48679637015bfc839a44" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F74b1f478-e12b-4b8c-b8f5-4564431bd77b%2FUntitled.png?width=1896&amp;table=block&amp;id=21d26845-8bfe-4867-9637-015bfc839a44"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F74b1f478-e12b-4b8c-b8f5-4564431bd77b%2FUntitled.png?width=1896&amp;table=block&amp;id=21d26845-8bfe-4867-9637-015bfc839a44" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/05233d2265c84ced91b4f0d82929e09f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">常量池中的内容在加载阶段就会被放到运行时常量池中</span></span></li></ul><div id="https://www.notion.so/23dac2c3b2584c1caae55994fdb98eae" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F86dd561c-282a-4e7d-b5e7-e8747add0e5c%2FUntitled.png?width=1115&amp;table=block&amp;id=23dac2c3-b258-4c1c-aae5-5994fdb98eae"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F86dd561c-282a-4e7d-b5e7-e8747add0e5c%2FUntitled.png?width=1115&amp;table=block&amp;id=23dac2c3-b258-4c1c-aae5-5994fdb98eae" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/3b227cdcf4bc428da5f987724096a75f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/3b227cdcf4bc428da5f987724096a75f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">永久代（PermGen）是 Hotspot 虚拟机特有的概念， Java8 的时候又被元空间</strong></span><span class="SemanticString">取代了，永久代和元空间都可以理解为方法区的落地实现。</span></span></h3><div id="https://www.notion.so/9666568a4cd2482688007f955ea06ab3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">永久代物理是堆的一部分，和新生代，老年代地址是连续的（受垃圾回收器管理），而元空间存在于本地内存（我们常说的堆外内存，不受垃圾回收器管理），这样就不受 JVM 限制了，也比较难发生OOM（都会有溢出异常）</span></span></p></div><h3 id="https://www.notion.so/6865aa06dc7044dc93aee919a7fe153d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/6865aa06dc7044dc93aee919a7fe153d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">永久代被拆分，元空间存储类信息，静态变量和常量池并入堆中</span></span></h3><div id="https://www.notion.so/324f830b31184868a6d0d5864d089a6f" class="Divider"></div><h3 id="https://www.notion.so/01f3d1ba58a948ca82d22ee742e8051b" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/01f3d1ba58a948ca82d22ee742e8051b"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">方法区存储着类信息，常量池，静态变量等数据</span></span></h3><h3 id="https://www.notion.so/86109755bbcb4bd6b4ea64ec80d79c41" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/86109755bbcb4bd6b4ea64ec80d79c41"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">方法区的垃圾回收</span></span></h3><div id="https://www.notion.so/56eeda40fbb64eaebd4ed3304f47b400" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F27d07be4-d253-4914-8a82-9bad59522a51%2FUntitled.png?width=1870&amp;table=block&amp;id=56eeda40-fbb6-4eae-bd4e-d3304f47b400"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F27d07be4-d253-4914-8a82-9bad59522a51%2FUntitled.png?width=1870&amp;table=block&amp;id=56eeda40-fbb6-4eae-bd4e-d3304f47b400" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/1114a577c8a44cd9a5e1576909ba86b3" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/1114a577c8a44cd9a5e1576909ba86b3"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Java虚拟机栈</span></span></h2><div id="https://www.notion.so/3831dae061494f839d60d1ec23e7b915" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">每个 Java 方法在执行的同时会创建一个栈帧用于存储局部变量表、操作数栈、常量池引用等信息。从方法调用直至执行完成的过程，对应着一个栈帧在 Java 虚拟机栈中入栈和出栈的过程。</span></span></p></div><blockquote id="https://www.notion.so/a3aa266f13c9493893748fa3ecd888b6" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">每个方法被执行的时候，Java虚拟机都会同步创建一个栈帧用于存储局部变量、操作数栈、动态连接、方法出口等信息。每方法被调用一直到执行完毕的过程时就对应着一个栈帧在虚拟机栈中从入栈到出栈的过程。 • 线程运行时需要的内部空间（一个栈对应多个栈帧，栈帧：每个方法运行时需要的内存）• 每个线程运行时所需要的内存，称为虚拟机栈• 每个栈由多个栈帧（Frame）组成，对应着每次方法调用时所占用的内存• 每个线程只能有一个活动栈，对应着当前正在执行的那个方法</span></span></blockquote><ul class="BulletedListWrapper"><li id="https://www.notion.so/8e3c4d00e8f54361af8c49c5e88cdc9f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">栈内存越大，反而会使线程数越少（假如物理机上内存为500M，每个线程的栈内存分配1M，那么就可以分配500个线程，当把每个线程的栈内存调大至 2M，那么就只能分配 250 个线程），所以不建议采用过大的栈内存当变量或者方法为私有时不需要考虑线程安全，当变量或方法为公共的或者 static 时就需要考虑线程安全因为局部变量是线程私有的，每个方法在不同线程调用时都会在当前的栈内存中产生一个新的变量或者方法；但是如果是公有的或者static 时，多个线程会同时操作一个变量。</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">扩展</strong></span><span class="SemanticString">问题：方法内的局部变量是否线程安全？</span></span></li></ul><blockquote id="https://www.notion.so/9dbe5e3378c741dd833c1839c1ed58fd" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">a. 如果方法内局部变量没有逃离当前方法的作用访问，那么它就是线程安全的。b. 如果局部变量引用了变量，并逃离了方法的作用方法，那么就需要考虑线程安全问题 • 问题：垃圾回收是否涉及栈内存？ 垃圾回收不会涉及栈内存，不会回收栈内存的东西，只会回收堆内存中的东西。</span></span></blockquote><div id="https://www.notion.so/2ef5e98c54514c44a5a39139ab6b6043" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F0865c3f1-b885-4f5f-b0eb-93ec79d83e01%2FUntitled.png?width=1761&amp;table=block&amp;id=2ef5e98c-5451-4c44-a5a3-9139ab6b6043"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F0865c3f1-b885-4f5f-b0eb-93ec79d83e01%2FUntitled.png?width=1761&amp;table=block&amp;id=2ef5e98c-5451-4c44-a5a3-9139ab6b6043" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/c9edac2c53654cb085c6b90e364729de" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/c9edac2c53654cb085c6b90e364729de"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">动态链接</span></span></h3><div id="https://www.notion.so/aa3ac888ecb244099f12219a5f5fc039" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F43e250fc-5a86-426a-80c0-379e339e4dfa%2FUntitled.png?width=1851&amp;table=block&amp;id=aa3ac888-ecb2-4409-9f12-219a5f5fc039"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F43e250fc-5a86-426a-80c0-379e339e4dfa%2FUntitled.png?width=1851&amp;table=block&amp;id=aa3ac888-ecb2-4409-9f12-219a5f5fc039" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/63c3fd50da2a4521b9ef857e3a4b6610" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/63c3fd50da2a4521b9ef857e3a4b6610"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">本地方法栈</span></span></h2><div id="https://www.notion.so/271a009f8e4f4b44983258b942c6350f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">本地方法栈与Java虚拟机栈类似，区别只是本地方法栈为本地方法读服务</span></span></p></div><div id="https://www.notion.so/46637b517ed64e5ca22f815bee604879" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">本地方法栈</strong></span><span class="SemanticString">与</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">虚拟机栈</strong></span><span class="SemanticString">的作用非常相似，其区别只是虚拟机栈为虚拟机执行</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Java方法</strong></span><span class="SemanticString">（也就是字节码）服务，而本地方法栈则是为虚拟机使用到的</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">本地方法</strong></span><span class="SemanticString">（Native） 方法服务。同时jdk源代码中 native 修饰的方法一般都是调用别的语言实现。</span></span></p></div><h2 id="https://www.notion.so/1386d50626cf41ed96a1c602cf8508ac" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/1386d50626cf41ed96a1c602cf8508ac"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">堆</span></span></h2><div id="https://www.notion.so/e052c03198ef4056bdd6113ba776ebbd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">堆是垃圾收集的主要区域</span></span></p></div><h3 id="https://www.notion.so/9ba526b184d547c2aa10fd32e219b6b8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/9ba526b184d547c2aa10fd32e219b6b8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">为了进行高效的垃圾回收，将堆分为三块区域</span></span></h3><div id="https://www.notion.so/7ecb571ddaa34b11a7c4cb03751bb617" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb1fda053-e072-423b-a7ae-d8bbbeff1f6e%2FUntitled.png?width=927&amp;table=block&amp;id=7ecb571d-daa3-4b11-a7c4-cb03751bb617"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb1fda053-e072-423b-a7ae-d8bbbeff1f6e%2FUntitled.png?width=927&amp;table=block&amp;id=7ecb571d-daa3-4b11-a7c4-cb03751bb617" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><blockquote id="https://www.notion.so/507d3844246344b7b96bfdae73220845" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">对于Java应用程序来说，Java堆（Java Heap）是虚拟机所管理的内存中最大的一块。Java堆是被所 有线程共享的一块内存区域，在虚拟机启动时创建。此内存区域的唯一目的就是存放对象实例，Java 世界里“几乎”所有的对象实例都在这里分配内存。—— 深入理解java虚拟机第三版 2.2.4 java堆</span></span></blockquote><div id="https://www.notion.so/d4d601b7ce1b4245b74d8d299f936105" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">常见的异常：java堆内存溢出(</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">OutOfMemoryError</strong></span><span class="SemanticString"> 堆内存溢出异常，就是某个</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">变量</strong></span><span class="SemanticString">内容太大，超出了栈内存可以存储的最大值。通俗点讲就是你在java程序中定义的变量大小超过了java堆内存大小，存不下了就像我们倒水时杯子满了再倒水就会溢出一样。</span></span></p></div><h3 id="https://www.notion.so/18ecf189e8b54fc084565554cf66caa4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/18ecf189e8b54fc084565554cf66caa4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">年轻代 Minor GC</span></span></h3><div id="https://www.notion.so/aa5e0deae66c48479a59962f806d2206" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F053000a1-ff00-46c9-98fe-eef35cb04fb3%2FUntitled.png?width=1642&amp;table=block&amp;id=aa5e0dea-e66c-4847-9a59-962f806d2206"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F053000a1-ff00-46c9-98fe-eef35cb04fb3%2FUntitled.png?width=1642&amp;table=block&amp;id=aa5e0dea-e66c-4847-9a59-962f806d2206" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/04d3fc9acfdf43b5a29ddcc4a9c81fac" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/04d3fc9acfdf43b5a29ddcc4a9c81fac"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">老年代 Major GC</span></span></h3><h2 id="https://www.notion.so/be38912f1c604edbab86a5f9cee3d088" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/be38912f1c604edbab86a5f9cee3d088"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">程序计数器</span></span></h2><div id="https://www.notion.so/c68719fd8da84a7aa2b8bc3a3b6b7097" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">由于在JVM中多线程是通过线程轮流切换来换取CPU执行时间的，在任何一个确定的时刻，一个CPU只会执行一条线程的指令。因此，为了线程切换后能恢复到正确的执行位置，每条线程都需要一个独立的程序计数器。</span></span></p></div><div id="https://www.notion.so/ce2f0d1fb79447929ae33a4eca3a2de7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">程序计数器占用内存空间非常小，是线程私有的，每个线程运行的时候都会有一个独立的计数器，是Java虚拟机规范中唯一一个没有规定任何OutOfMemoryError情况的区域。如果程序执行的时候线程执行的是一个Java方法，计数器是有值的，其记录的是程序正在执行的字节码指令的地址；如果执行的是Natvie方法，计数器的值则为空（Undefined）</span></span></p></div><h3 id="https://www.notion.so/790780274a9b49c1ba80b3bc9a79e7d5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/790780274a9b49c1ba80b3bc9a79e7d5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">存储下一条需要运行的指令</span></span></h3><div id="https://www.notion.so/806612d5939740d399afe3a8222ebcb2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/452f8e9e661d4a5ea2c779e308acb3ca" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/452f8e9e661d4a5ea2c779e308acb3ca"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">相关分析</span></span></h1><h2 id="https://www.notion.so/fa2677f81c704c49b328355dd8687465" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/fa2677f81c704c49b328355dd8687465"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">基本数据类型的数据本身是不会改变的，</span></span></h2></article>
  <footer class="Footer">
  <div>&copy; 沂风 2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>