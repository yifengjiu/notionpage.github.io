<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>java引用类型 &nbsp;|&nbsp;沂风</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="java引用类型 ">
  
    <meta name="description" content="沉淀，恢复更新">
    <meta property="og:description" content="沉淀，恢复更新">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🚈&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>关于</span>
        </div>
      </a>
    
  
</nav>
  <header class="Header">
    
      <div class="Header__Cover">
        <img src="https://www.notion.so/images/page-cover/webb3.jpg">
      </div>
    
    <div class="Header__Spacer ">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🚈&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">java引用类型 </h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Sat, Oct 14, 2023</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--brown">
            <a href="tag/JVM.html">JVM</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/a70b18ad524c423d9ece6ee2d01e8324" class="PageRoot"><ul id="https://www.notion.so/cd087724689941c99daa24c868b41d0e" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/25356e1342214f5bbd1c550322d4be08"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">在 Java 中一切都被视为了对象，但是我们操作的标识符实际上是对象的一个引用</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/b597317e79fd4e86a867505fc8e89996"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">通过将这个叫“引用”的标识符指向某个对象，之后便可以通过这个引用来实现操作对象了。</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c8c4922591d746fea454daac282a9dfb"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">在 JDK.1.2 之后，Java 对引用的概念进行了扩充，将引用分为了：强引用（Strong Reference）、软引用（Soft Reference）、弱引用（Weak Reference）、虚引用（Phantom Reference）4 种，这 4 种引用的强度依次减弱。</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c092fd57d6624ada88f800525749b07e"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">基本数据类型与引用类型 </span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/8bb812fdd9564ee6b54bf51e40e7dec8"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">存储位置</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/d70072dfcab24ff3bbd6352809650951"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">在类中声明的变量是成员变量，也叫全局变量，放在堆中的（因为全局变量不会随着某个方法执行结束而销毁）。</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/26a4b707a50546088f0f31beac9e2921"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">传递方式</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f1627ed221d64fcb94ab3b165ed68ad8"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">在方法中定义的非全局基本数据类型变量，调用方法时作为参数是按数值传递的</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/b739d4ecc9b5438c808735e39c0c2bbc"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">引用数据类型变量，调用方法时作为参数是按引用传递的</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/429ad9e3923144379c5062f7ef87fde8"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">强引用</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/ae76b2e1949d4921b017c07388882d6d"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">Java中默认声明的就是强引用</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/8009cfc2efee4568b8ad8a8da4265447"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">只要强引用存在，垃圾回收器将永远不会回收被引用的对象，哪怕内存不足时，JVM也会直接抛出OutOfMemoryError，不会去回收。如果想中断强引用与对象之间的联系，可以显示的将强引用赋值为null，这样一来，JVM就可以适时的回收对象了</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/49d8a5d9492c4316a349d4f2859604a5"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">软引用</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/e54117b0c1c24e30b6bb95e94b43e347"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">软引用是用来描述一些非必需但仍有用的对象。</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">在内存足够的时候，软引用对象不会被回收，只有在内存不足时，系统则会回收软引用对象，如果回收了软引用对象之后仍然没有足够的内存，才会抛出内存溢出异常</strong></span><span class="SemanticString">。</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/cf990082624e4e4cb46848b993cf533b"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">举例</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/0d4cff95a0a7493e9a656ead454d4337"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">在运行下面的Java代码之前，需要先配置参数 -Xms2M -Xmx3M，将 JVM 的初始内存设为2M，最大可用内存为 3M。</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/619bf3cfa5664722b868f1d12edb94c9"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">我们发现无论循环创建多少个软引用对象，打印结果总是只有最后一个对象被保留，其他的obj全都被置空回收了。</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/6a0fe0a843804ca791bccc40a9e4627e"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">值得注意的一点 , 即使有 byte[] buff 引用指向对象, 且 buff 是一个strong reference, 但是 SoftReference sr 指向的对象仍然被回收了，这是因为Java的编译器发现了在之后的代码中, buff 已经没有被使用了, 所以自动进行了优化。</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/048b1e846e754f5db5cb4c0eca4a3525"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">弱引用</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/8959d11672ad4dc98330a43ab0807800"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">弱引用的引用强度比软引用要更弱一些，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">无论内存是否足够，只要 JVM 开始进行垃圾回收，那些被弱引用关联的对象都会被回收</strong></span><span class="SemanticString">。在 JDK1.2 之后，用 java.lang.ref.WeakReference 来表示弱引用。</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f29e7cb7ccd049abafd180be7ec2e310"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">虚引用 </span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/7d1473ebda354e9d80295cadb5d6fd49"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">无法通过虚引用获得一个对象实例。</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/720eda99f844481ea92f9efa873dc105"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">
如果一个对象仅持有虚引用，那么它就和没有任何引用一样，它随时可能会被回收，在 JDK1.2 之后，用 PhantomReference 类来表示，通过查看这个类的源码，发现它只有一个构造函数和一个 get() 方法，而且它的 get() 方法仅仅是返回一个null，也就是说将永远无法通过虚引用来获取对象，虚引用必须要和 ReferenceQueue 引用队列一起使用。</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/27c6ae5547614cd68f9223bd54a59702"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">它的作用在于跟踪垃圾回收过程，在对象被收集器回收时收到一个系统通知。 当垃圾回收器准备回收一个对象时，如果发现它还有虚引用，就会在垃圾回收后，将这个虚引用加入引用队列，在其关联的虚引用出队前，不会彻底销毁该对象。 所以可以通过检查引用队列中是否有相应的虚引用来判断对象是否已经被回收了。</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/74a16b9ddd654f72a4578c71ccc1c6ec"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString">与软引用和弱引用不同，显式使用虚引用可以阻止对象被清除，只有在程序中显式或者隐式移除这个虚引用时，这个已经执行过finalize方法的对象才会被清除。</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/b1b773879d9e4d9fb480e339ecb46319"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">引用队列</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/3e9b0a3ce3e84293b740ecfd93bbc9bc"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">适用场景</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/a5919d47f5da498a871eafbb41a84178"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">参考链接</span></span></div></a></li></ul><h3 id="https://www.notion.so/25356e1342214f5bbd1c550322d4be08" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/25356e1342214f5bbd1c550322d4be08"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">在 Java 中一切都被视为了对象，但是我们操作的标识符实际上是对象的一个引用</span></span></h3><h3 id="https://www.notion.so/b597317e79fd4e86a867505fc8e89996" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/b597317e79fd4e86a867505fc8e89996"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">通过将这个叫“引用”的标识符指向某个对象，之后便可以通过这个引用来实现操作对象了。</span></span></h3><h3 id="https://www.notion.so/c8c4922591d746fea454daac282a9dfb" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/c8c4922591d746fea454daac282a9dfb"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">在 JDK.1.2 之后，Java 对引用的概念进行了扩充，将引用分为了：强引用（Strong Reference）、软引用（Soft Reference）、弱引用（Weak Reference）、虚引用（Phantom Reference）4 种，这 4 种引用的强度依次减弱。</span></span></h3><h1 id="https://www.notion.so/c092fd57d6624ada88f800525749b07e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/c092fd57d6624ada88f800525749b07e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">基本数据类型与引用类型 </span></span></h1><h2 id="https://www.notion.so/8bb812fdd9564ee6b54bf51e40e7dec8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/8bb812fdd9564ee6b54bf51e40e7dec8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">存储位置</span></span></h2><div id="https://www.notion.so/01dff0125dfd44c3a7d11a031a92de57" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2Fb6f40aa1-82a6-4a36-9f38-c97d1018d96e%2FUntitled.png?width=700&amp;table=block&amp;id=01dff012-5dfd-44c3-a7d1-1a031a92de57"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2Fb6f40aa1-82a6-4a36-9f38-c97d1018d96e%2FUntitled.png?width=700&amp;table=block&amp;id=01dff012-5dfd-44c3-a7d1-1a031a92de57" style="width:700px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/d70072dfcab24ff3bbd6352809650951" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/d70072dfcab24ff3bbd6352809650951"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">在类中声明的变量是成员变量，也叫全局变量，放在堆中的（因为全局变量不会随着某个方法执行结束而销毁）。</span></span></h3><h2 id="https://www.notion.so/26a4b707a50546088f0f31beac9e2921" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/26a4b707a50546088f0f31beac9e2921"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">传递方式</span></span></h2><h3 id="https://www.notion.so/f1627ed221d64fcb94ab3b165ed68ad8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/f1627ed221d64fcb94ab3b165ed68ad8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">在方法中定义的非全局基本数据类型变量，调用方法时作为参数是按数值传递的</span></span></h3><div id="https://www.notion.so/56294cdb4d0c40e3b3b479a35006f3e3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"> </span></span></p></div><div id="https://www.notion.so/3a9599168a02453a9b7f5b13d8b42298" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2Fca4d6261-41f2-48d6-822c-777495553e08%2FUntitled.png?width=1131&amp;table=block&amp;id=3a959916-8a02-453a-9b7f-5b13d8b42298"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2Fca4d6261-41f2-48d6-822c-777495553e08%2FUntitled.png?width=1131&amp;table=block&amp;id=3a959916-8a02-453a-9b7f-5b13d8b42298" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/b739d4ecc9b5438c808735e39c0c2bbc" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/b739d4ecc9b5438c808735e39c0c2bbc"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">引用数据类型变量，调用方法时作为参数是按引用传递的</span></span></h3><div id="https://www.notion.so/1504e8f8145745448acde138871f444b" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2Fd98e7465-0a63-4fc7-891d-5a43e747c316%2FUntitled.png?width=813&amp;table=block&amp;id=1504e8f8-1457-4544-8acd-e138871f444b"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2Fd98e7465-0a63-4fc7-891d-5a43e747c316%2FUntitled.png?width=813&amp;table=block&amp;id=1504e8f8-1457-4544-8acd-e138871f444b" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h1 id="https://www.notion.so/429ad9e3923144379c5062f7ef87fde8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/429ad9e3923144379c5062f7ef87fde8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">强引用</span></span></h1><h3 id="https://www.notion.so/ae76b2e1949d4921b017c07388882d6d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/ae76b2e1949d4921b017c07388882d6d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Java中默认声明的就是强引用</span></span></h3><div id="https://www.notion.so/77f6f9ab83df4699958310f5d354f217" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2Febeabacb-996e-43aa-b0d3-1d689c063ac2%2FUntitled.png?width=1098&amp;table=block&amp;id=77f6f9ab-83df-4699-9583-10f5d354f217"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2Febeabacb-996e-43aa-b0d3-1d689c063ac2%2FUntitled.png?width=1098&amp;table=block&amp;id=77f6f9ab-83df-4699-9583-10f5d354f217" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/8009cfc2efee4568b8ad8a8da4265447" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/8009cfc2efee4568b8ad8a8da4265447"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">只要强引用存在，垃圾回收器将永远不会回收被引用的对象，哪怕内存不足时，JVM也会直接抛出OutOfMemoryError，不会去回收。如果想中断强引用与对象之间的联系，可以显示的将强引用赋值为null，这样一来，JVM就可以适时的回收对象了</span></span></h3><h1 id="https://www.notion.so/49d8a5d9492c4316a349d4f2859604a5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/49d8a5d9492c4316a349d4f2859604a5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">软引用</span></span></h1><h3 id="https://www.notion.so/e54117b0c1c24e30b6bb95e94b43e347" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/e54117b0c1c24e30b6bb95e94b43e347"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">软引用是用来描述一些非必需但仍有用的对象。</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">在内存足够的时候，软引用对象不会被回收，只有在内存不足时，系统则会回收软引用对象，如果回收了软引用对象之后仍然没有足够的内存，才会抛出内存溢出异常</strong></span><span class="SemanticString">。</span></span></h3><h2 id="https://www.notion.so/cf990082624e4e4cb46848b993cf533b" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/cf990082624e4e4cb46848b993cf533b"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">举例</span></span></h2><h3 id="https://www.notion.so/0d4cff95a0a7493e9a656ead454d4337" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/0d4cff95a0a7493e9a656ead454d4337"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">在运行下面的Java代码之前，需要先配置参数 -Xms2M -Xmx3M，将 JVM 的初始内存设为2M，最大可用内存为 3M。</span></span></h3><div id="https://www.notion.so/13cd9326e63043b59ae7bc38f165838f" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2Fef267805-4c8e-4089-972c-fa39e2c48da7%2FUntitled.png?width=1220&amp;table=block&amp;id=13cd9326-e630-43b5-9ae7-bc38f165838f"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2Fef267805-4c8e-4089-972c-fa39e2c48da7%2FUntitled.png?width=1220&amp;table=block&amp;id=13cd9326-e630-43b5-9ae7-bc38f165838f" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/619bf3cfa5664722b868f1d12edb94c9" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/619bf3cfa5664722b868f1d12edb94c9"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">我们发现无论循环创建多少个软引用对象，打印结果总是只有最后一个对象被保留，其他的obj全都被置空回收了。</span></span></h3><h3 id="https://www.notion.so/6a0fe0a843804ca791bccc40a9e4627e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/6a0fe0a843804ca791bccc40a9e4627e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">值得注意的一点 , 即使有 byte[] buff 引用指向对象, 且 buff 是一个strong reference, 但是 SoftReference sr 指向的对象仍然被回收了，这是因为Java的编译器发现了在之后的代码中, buff 已经没有被使用了, 所以自动进行了优化。</span></span></h3><h1 id="https://www.notion.so/048b1e846e754f5db5cb4c0eca4a3525" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/048b1e846e754f5db5cb4c0eca4a3525"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">弱引用</span></span></h1><h3 id="https://www.notion.so/8959d11672ad4dc98330a43ab0807800" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/8959d11672ad4dc98330a43ab0807800"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">弱引用的引用强度比软引用要更弱一些，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">无论内存是否足够，只要 JVM 开始进行垃圾回收，那些被弱引用关联的对象都会被回收</strong></span><span class="SemanticString">。在 JDK1.2 之后，用 java.lang.ref.WeakReference 来表示弱引用。</span></span></h3><div id="https://www.notion.so/a0a035bb099c4add947de6e106073175" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2F78afc676-a52d-4c8f-a6dd-281594a9157d%2FUntitled.png?width=1209&amp;table=block&amp;id=a0a035bb-099c-4add-947d-e6e106073175"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2F78afc676-a52d-4c8f-a6dd-281594a9157d%2FUntitled.png?width=1209&amp;table=block&amp;id=a0a035bb-099c-4add-947d-e6e106073175" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h1 id="https://www.notion.so/f29e7cb7ccd049abafd180be7ec2e310" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/f29e7cb7ccd049abafd180be7ec2e310"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">虚引用 </span></span></h1><h3 id="https://www.notion.so/7d1473ebda354e9d80295cadb5d6fd49" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/7d1473ebda354e9d80295cadb5d6fd49"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">无法通过虚引用获得一个对象实例。</span></span></h3><h3 id="https://www.notion.so/720eda99f844481ea92f9efa873dc105" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/720eda99f844481ea92f9efa873dc105"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">
如果一个对象仅持有虚引用，那么它就和没有任何引用一样，它随时可能会被回收，在 JDK1.2 之后，用 PhantomReference 类来表示，通过查看这个类的源码，发现它只有一个构造函数和一个 get() 方法，而且它的 get() 方法仅仅是返回一个null，也就是说将永远无法通过虚引用来获取对象，虚引用必须要和 ReferenceQueue 引用队列一起使用。</span></span></h3><h3 id="https://www.notion.so/27c6ae5547614cd68f9223bd54a59702" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/27c6ae5547614cd68f9223bd54a59702"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">它的作用在于跟踪垃圾回收过程，在对象被收集器回收时收到一个系统通知。 当垃圾回收器准备回收一个对象时，如果发现它还有虚引用，就会在垃圾回收后，将这个虚引用加入引用队列，在其关联的虚引用出队前，不会彻底销毁该对象。 所以可以通过检查引用队列中是否有相应的虚引用来判断对象是否已经被回收了。</span></span></h3><h3 id="https://www.notion.so/74a16b9ddd654f72a4578c71ccc1c6ec" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/74a16b9ddd654f72a4578c71ccc1c6ec"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">与软引用和弱引用不同，显式使用虚引用可以阻止对象被清除，只有在程序中显式或者隐式移除这个虚引用时，这个已经执行过finalize方法的对象才会被清除。</span></span></h3><h2 id="https://www.notion.so/b1b773879d9e4d9fb480e339ecb46319" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/b1b773879d9e4d9fb480e339ecb46319"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">引用队列</span></span></h2><div id="https://www.notion.so/739dfc5d644442b6939a3ff09f4ef9a5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">引用队列可以与软引用、弱引用以及虚引用一起配合使用，当垃圾回收器准备回收一个对象时，如果发现它还有引用，那么就会在回收对象之前，把这个引用加入到与之关联的引用队列中去。程序可以通过判断引用队列中是否已经加入了引用，来判断被引用的对象是否将要被垃圾回收，这样就可以在对象被回收之前采取一些必要的措施。</span></span></p></div><h2 id="https://www.notion.so/3e9b0a3ce3e84293b740ecfd93bbc9bc" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/3e9b0a3ce3e84293b740ecfd93bbc9bc"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">适用场景</span></span></h2><div id="https://www.notion.so/8d5cdfee1a2b4e449c0cf3cd9e84a711" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2Fe389918f-8b94-46dc-86e2-69a41671e19a%2FUntitled.png?width=1165&amp;table=block&amp;id=8d5cdfee-1a2b-4e44-9c0c-f3cd9e84a711"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F97f60ed7-2f91-4328-9e16-bcc075d7c8a7%2Fe389918f-8b94-46dc-86e2-69a41671e19a%2FUntitled.png?width=1165&amp;table=block&amp;id=8d5cdfee-1a2b-4e44-9c0c-f3cd9e84a711" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h1 id="https://www.notion.so/a5919d47f5da498a871eafbb41a84178" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/a5919d47f5da498a871eafbb41a84178"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">参考链接</span></span></h1><div id="https://www.notion.so/bcda83f6b64646259427e88b7d9090b4" class="Bookmark"><a href="https://www.cnblogs.com/liyutian/p/9690974.html"><h5 class="Bookmark__Title">Java四种引用类型 - Helldorado - 博客园</h5><p class="Bookmark__Desc">引用与对象 每种编程语言都有自己操作内存中元素的方式，例如在 C 和 C++ 里是通过指针，而在 Java 中则是通过“引用”。 在 Java 中一切都被视为了对象，但是我们操作的标识符实际上是对象的一个引用（reference）。 通过将这个叫“引用”的标识符指向某个对象，之后便可以通过这个引用来</p><p class="Bookmark__Link">https://www.cnblogs.com/liyutian/p/9690974.html</p></a></div><div id="https://www.notion.so/a32050de681d4a408f58f420013f081f" class="Bookmark"><a href="https://www.cnblogs.com/mfrank/p/9837070.html"><h5 class="Bookmark__Title">你不可不知的Java引用类型之——虚引用 - 弗兰克的猫 - 博客园</h5><p class="Bookmark__Desc">定义 虚引用是使用PhantomReference创建的引用，虚引用也称为幽灵引用或者幻影引用，是所有引用类型中最弱的一个。一个对象是否有虚引用的存在，完全不会对其生命周期构成影响，也无法通过虚引用获得一个对象实例。 说明 虚引用，正如其名，对一个对象而言，这个引用形同虚设，有和没有一样。 如果一个</p><p class="Bookmark__Link">https://www.cnblogs.com/mfrank/p/9837070.html</p></a></div></article>
  <footer class="Footer">
  <div>&copy; 沂风 2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>